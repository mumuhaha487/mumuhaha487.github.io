<!doctype html>
<html lang="en-us">
  <head>
    <title>用python从零开始做一个最简单的小说爬虫带GUI界面（1/3) // 木哈文轩</title>
    <link rel="shortcut icon" href="/favicon.ico" />
    <meta charset="utf-8" />
    <meta name="generator" content="Hugo 0.123.3">
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="author" content="木木em哈哈" />
    <meta name="description" content="文章浏览阅读605次。而且当时的爬虫代码有许多问题但是最近学了PyQt5想着搞个带界面的爬虫玩玩那就啥也不说开搞！！！_python爬虫和gui" />
    <link rel="stylesheet" href="/css/main.min.a545955c4c2a15328ae3f208fda979c3a40146d5a6d4f95e0ab1a00e48cd1ff2.css" />
    

    
    <meta name="twitter:card" content="summary"/><meta name="twitter:title" content="用python从零开始做一个最简单的小说爬虫带GUI界面（1/3)"/>
<meta name="twitter:description" content="文章浏览阅读605次。而且当时的爬虫代码有许多问题但是最近学了PyQt5想着搞个带界面的爬虫玩玩那就啥也不说开搞！！！_python爬虫和gui"/>

    <meta property="og:title" content="用python从零开始做一个最简单的小说爬虫带GUI界面（1/3)" />
<meta property="og:description" content="文章浏览阅读605次。而且当时的爬虫代码有许多问题但是最近学了PyQt5想着搞个带界面的爬虫玩玩那就啥也不说开搞！！！_python爬虫和gui" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://0ha.top/posts/132394257/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-08-24T04:27:29+00:00" />
<meta property="article:modified_time" content="2023-08-24T04:27:29+00:00" />



  </head>
  <body>
    <header class="app-header">
      <a href="https://0ha.top/"><img class="app-header-avatar" src="https://s3.bmp.ovh/imgs/2024/02/27/ebc3b3191cd37c75.jpg" alt="木木em哈哈" /></a>
      <span class="app-header-title">木哈文轩</span>
      <nav class="app-header-menu">
          <a class="app-header-menu-item" href="/">主页</a>
              ·  
          
          <a class="app-header-menu-item" href="/tags/">标签</a>
              ·  
          
          <a class="app-header-menu-item" href="/about/">有关</a>
      </nav>
      <p>别让我逮住嗷</p>
      <div class="app-header-social">
        
          <a href="https://blog.csdn.net/mumuemhaha" target="_blank" rel="noreferrer noopener me">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-circle">
  <title>CSDN</title>
  <circle cx="12" cy="12" r="10"></circle>
</svg>
          </a>
        
          <a href="https://github.com/mumuhaha487" target="_blank" rel="noreferrer noopener me">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-github">
  <title>Github</title>
  <path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path>
</svg>
          </a>
        
      </div>
    </header>
    <main class="app-container">
      
  <article class="post">
    <header class="post-header">
      <h1 class ="post-title">用python从零开始做一个最简单的小说爬虫带GUI界面（1/3)</h1>
      <div class="post-meta">
        <div>
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-calendar">
  <title>calendar</title>
  <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line>
</svg>
          Aug 24, 2023
        </div>
        <div>
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-clock">
  <title>clock</title>
  <circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline>
</svg>
          2 min read
        </div>
      </div>
    </header>
    <div class="post-content">
      <p><strong>目录</strong></p>
<p><a href="#%e4%b8%8b%e4%b8%80%e7%ab%a0%e5%86%85%e5%ae%b9">下一章内容</a></p>
<p><a href="#pyqt5%e7%9a%84%e9%85%8d%e7%bd%ae">PyQt5的配置</a></p>
<p><a href="#%c2%a0%e8%ae%be%e7%bd%ae%e8%bd%af%e4%bb%b6%e7%9a%84%e5%bf%ab%e6%8d%b7%e5%90%af%e5%8a%a8%e6%96%b9%e5%bc%8f">设置软件的快捷启动方式</a></p>
<p><a href="#1%c2%a0%c2%a0%c2%a0%c2%a0%c2%a0%c2%a0%c2%a0%c2%a0%e7%94%a8%e4%ba%8e%e8%ae%be%e8%ae%a1%e7%95%8c%e9%9d%a2%e7%9a%84%e7%a8%8b%e5%ba%8f">1. 用于设计界面的程序</a></p>
<p><a href="#2%c2%a0%c2%a0%c2%a0%c2%a0%c2%a0%c2%a0%c2%a0%c2%a0%e5%b0%86qt%20designer%e8%ae%be%e8%ae%a1%e5%87%ba%e6%9d%a5%e7%9a%84ui%e6%96%87%e4%bb%b6%e8%bd%ac%e5%8c%96%e4%b8%bapy%e6%96%87%e4%bb%b6">2. 将Qt Designer设计出来的ui文件转化为py文件</a></p>
<p><a href="#3%c2%a0%20%c2%a0%20%c2%a0%20%c2%a0%20%e5%8f%af%e4%bb%a5%e6%8a%8apy%e6%96%87%e4%bb%b6%e6%89%93%e5%8c%85%e6%88%90%e5%8f%af%e6%89%a7%e8%a1%8c%e7%9a%84exe%e6%96%87%e4%bb%b6">3. 可以把py文件打包成可执行的exe文件</a></p>
<p><a href="#4%c2%a0%c2%a0%c2%a0%c2%a0%c2%a0%c2%a0%c2%a0%c2%a0%e5%b0%86ico%e5%9b%be%e7%89%87%e6%94%be%e5%9c%a8qrc%e6%96%87%e4%bb%b6%e4%b8%ad%ef%bc%8c%e5%86%8d%e5%b0%86qrc%e6%96%87%e4%bb%b6%e8%bd%ac%e6%8d%a2%e6%88%90py%e6%96%87%e4%bb%b6%ef%bc%8c%e7%94%a8%e4%ba%8e%e5%b0%8f%e5%b7%a5%e5%85%b7%e7%9a%84%e5%9b%be%e6%a0%87">4. 将ico图片放在qrc文件中，再将qrc文件转换成py文件，用于小工具的图标</a></p>
<p><a href="#%e5%bf%ab%e6%8d%b7%e4%bd%bf%e7%94%a8%e6%96%b9%e6%b3%95">快捷使用方法</a></p>
<p><a href="#%c2%a0%e8%ae%be%e8%ae%a1%e7%95%8c%e9%9d%a2">设计界面</a></p>
<p><a href="#%e6%8a%8a%e8%ae%be%e8%ae%a1%e7%9a%84ui%e7%95%8c%e9%9d%a2%e7%9a%84ui%e6%96%87%e4%bb%b6%e8%bd%ac%e4%b8%bapy%e6%96%87%e4%bb%b6">把设计的ui界面的ui文件转为py文件</a></p>
<p><a href="#main%e6%96%87%e4%bb%b6%e4%b8%ad%e7%9a%84%e4%bb%a3%e7%a0%81">main文件中的代码</a></p>
<h3 id="下一章内容">下一章内容</h3>
<p><a href="https://blog.csdn.net/mumuemhaha/article/details/132457770?spm=1001.2014.3001.5501" title="用python从零开始做一个最简单的小说爬虫带GUI界面（2/3）_木木em哈哈的博客-CSDN博客">用python从零开始做一个最简单的小说爬虫带GUI界面（2/3）_木木em哈哈的博客-CSDN博客前一章博客我们讲了怎么通过PyQt5来制作图形化界面，并且进行一些基本设置接下来两章我们主要讲核心爬虫代码的实现。<img src="https://g.csdnimg.cn/static/logo/favicon32.ico" alt="">https://blog.csdn.net/mumuemhaha/article/details/132457770?spm=1001.2014.3001.5501 ;</a></p>
<h2 id="pyqt5的配置">PyQt5的配置</h2>
<p>配置其他的博主上有教程</p>
<p>建议安装以下包（最好在你原来的电脑环境也就是你电脑的cmd中输入以下命令，不要在pycharm创建的虚拟环境下创建，防止项目删除后软件打不开）</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>pip3 install -i https://pypi.tuna.tsinghua.edu.cn/simple PyQt5
</span></span><span style="display:flex;"><span>pip3 install -i https://pypi.tuna.tsinghua.edu.cn/simple PyQt5-tools
</span></span><span style="display:flex;"><span>pip3 install -i https://pypi.tuna.tsinghua.edu.cn/simple paramiko
</span></span><span style="display:flex;"><span>pip3 install -i https://pypi.tuna.tsinghua.edu.cn/simple pyinstaller
</span></span></code></pre></div><p>当然在pycharm中也要安装一遍</p>
<p>之后在设置中</p>
<p><img src="https://0ha.top/img/0dcc52e34ac74bf5a8e50d2affe9d508.png" alt=""></p>
<p>选择工具-&gt;外部工具-&gt;加号</p>
<p><img src="https://0ha.top/img/78be22560d1d4644b616ff0193536eee.png" alt=""></p>
<h3 id="设置软件的快捷启动方式">设置软件的快捷启动方式</h3>
<p>然后依次新建如下内容</p>
<h4 id="1-用于设计界面的程序">1. 用于设计界面的程序</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>名称：Qt Designer
</span></span><span style="display:flex;"><span>工具设置
</span></span><span style="display:flex;"><span>    程序：C:<span style="color:#ae81ff">\U</span>sers<span style="color:#ae81ff">\你</span>的用户名<span style="color:#ae81ff">\A</span>ppData<span style="color:#ae81ff">\L</span>ocal<span style="color:#ae81ff">\P</span>rograms<span style="color:#ae81ff">\P</span>ython<span style="color:#ae81ff">\你</span>的python版本<span style="color:#ae81ff">\L</span>ib<span style="color:#ae81ff">\s</span>ite-packages<span style="color:#ae81ff">\q</span>t5_applications<span style="color:#ae81ff">\Q</span>t<span style="color:#ae81ff">\b</span>in<span style="color:#ae81ff">\d</span>esigner.exe
</span></span><span style="display:flex;"><span>    工作目录：$FileDir$
</span></span></code></pre></div><h4 id="2-将qt-designer设计出来的ui文件转化为py文件">2. 将Qt Designer设计出来的ui文件转化为py文件</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>名称：PyUIC
</span></span><span style="display:flex;"><span>工具设置：
</span></span><span style="display:flex;"><span>    程序：C:<span style="color:#ae81ff">\U</span>sers<span style="color:#ae81ff">\你</span>的用户名<span style="color:#ae81ff">\A</span>ppData<span style="color:#ae81ff">\L</span>ocal<span style="color:#ae81ff">\P</span>rograms<span style="color:#ae81ff">\P</span>ython<span style="color:#ae81ff">\你</span>的python版本<span style="color:#ae81ff">\S</span>cripts<span style="color:#ae81ff">\p</span>yuic5.exe
</span></span><span style="display:flex;"><span>    实参：$FileName$ -o $FileNameWithoutExtension$.py
</span></span><span style="display:flex;"><span>    工具目录：$FileDir$
</span></span></code></pre></div><h4 id="3-可以把py文件打包成可执行的exe文件">3. 可以把py文件打包成可执行的exe文件</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>名称：PyInstall
</span></span><span style="display:flex;"><span>工具设置：
</span></span><span style="display:flex;"><span>    程序：C:<span style="color:#ae81ff">\U</span>sers<span style="color:#ae81ff">\你</span>的用户名<span style="color:#ae81ff">\A</span>ppData<span style="color:#ae81ff">\L</span>ocal<span style="color:#ae81ff">\P</span>rograms<span style="color:#ae81ff">\P</span>ython<span style="color:#ae81ff">\你</span>的python版本<span style="color:#ae81ff">\S</span>cripts<span style="color:#ae81ff">\p</span>yinstaller.exe
</span></span><span style="display:flex;"><span>    实参： -F -w  $FileNameWithoutExtension$.py
</span></span><span style="display:flex;"><span>    工作目录：$FileDir$
</span></span></code></pre></div><h4 id="4-将ico图片放在qrc文件中再将qrc文件转换成py文件用于小工具的图标">4. 将ico图片放在qrc文件中，再将qrc文件转换成py文件，用于小工具的图标</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>名称：pyrcc
</span></span><span style="display:flex;"><span>工具设置：
</span></span><span style="display:flex;"><span>    程序：C:<span style="color:#ae81ff">\U</span>sers<span style="color:#ae81ff">\你</span>的名字<span style="color:#ae81ff">\A</span>ppData<span style="color:#ae81ff">\L</span>ocal<span style="color:#ae81ff">\P</span>rograms<span style="color:#ae81ff">\P</span>ython<span style="color:#ae81ff">\你</span>的Python3版本<span style="color:#ae81ff">\S</span>cripts<span style="color:#ae81ff">\p</span>yrcc5.exe
</span></span><span style="display:flex;"><span>    实参：$FileName$ -o $FileNameWithoutExtension$.py
</span></span><span style="display:flex;"><span>    工作目录：$FileDir$
</span></span></code></pre></div><p>写完后点击应用即可</p>
<h3 id="快捷使用方法">快捷使用方法</h3>
<p>然后你可以点击左三角的</p>
<p>工具-&gt;外部工具中快捷使用</p>
<p><img src="https://0ha.top/img/3bf7c57ec55e44b8af2ff8780cf658c0.png" alt=""></p>
<h2 id="设计界面">设计界面</h2>
<p>然后我们点击Qt Designer开始设计界面</p>
<p><img src="https://0ha.top/img/46b8d3e91778446993dbfce6e3f93733.png" alt=""></p>
<p>然后开始创建一个窗口</p>
<p><img src="https://0ha.top/img/4bd6d37bca414a48a728951b965ab493.png" alt=""></p>
<p>进入后按照自己的喜好创建窗口</p>
<p><img src="https://0ha.top/img/79c2c6fa532048b9890e5be8a19daf72.png" alt=""></p>
<p>高级的使用方法不进行介绍</p>
<p>我用到的有</p>
<p>label：就是框框中的文字</p>
<p><img src="https://0ha.top/img/f22b16f9b5834f4896fc4307754cc208.png" alt=""></p>
<p>line edit：用于获取输入的链接</p>
<p><img src="https://0ha.top/img/c4f6762f631f45378aa77580139eb656.png" alt=""></p>
<p>Push Button：用于设置触发按钮，比如开始爬取或者关闭窗口</p>
<p><img src="https://0ha.top/img/68f6b047435e4797947e231f96b69b21.png" alt=""></p>
<p>Text Browser：用于输出程序的结果（可不加，给用户看的）</p>
<p><img src="https://0ha.top/img/a23e828ff5344e6cb63d9ae80e1d9d6e.png" alt=""></p>
<p>点击控件后右边的框框会显示是哪一个控件</p>
<p>建议重新命名一边名称，不然会很难记</p>
<p><img src="https://0ha.top/img/cead37111eac4b98bea3ccaa3f437569.png" alt=""></p>
<p>设计完成后就可以点击保存了，默认保存到你python项目的根目录</p>
<h2 id="把设计的ui界面的ui文件转为py文件">把设计的ui界面的ui文件转为py文件</h2>
<p>由于我们设置了快捷方式</p>
<p>我们可以非常便捷右键ui文件然后执行PyUIC工具</p>
<p><img src="https://0ha.top/img/fb72da08fd3a41e8a094dc9048787557.png" alt=""></p>
<p>之后你就可以在项目的文件目录下找到同名称的py文件</p>
<p>亦或者你可以执行命令</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>pyuic5 -o 原ui文件名称 输出的py文件名称
</span></span></code></pre></div><p>编译出来的文件大概长这样</p>
<p><img src="https://0ha.top/img/c1103f0006a64bcc93e15f232b1158f5.png" alt=""></p>
<p>文件的代码就是</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e"># -*- coding: utf-8 -*-</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Form implementation generated from reading ui file &#39;win.ui&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Created by: PyQt5 UI code generator 5.15.9</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># WARNING: Any manual changes made to this file will be lost when pyuic5 is</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># run again.  Do not edit this file unless you know what you are doing.</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> PyQt5 <span style="color:#f92672">import</span> QtCore, QtGui, QtWidgets
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Ui_MainWindow</span>(object):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">setupUi</span>(self, MainWindow):
</span></span><span style="display:flex;"><span>        MainWindow<span style="color:#f92672">.</span>setObjectName(<span style="color:#e6db74">&#34;MainWindow&#34;</span>)
</span></span><span style="display:flex;"><span>        MainWindow<span style="color:#f92672">.</span>resize(<span style="color:#ae81ff">679</span>, <span style="color:#ae81ff">485</span>)
</span></span><span style="display:flex;"><span>        self<span style="color:#f92672">.</span>centralwidget <span style="color:#f92672">=</span> QtWidgets<span style="color:#f92672">.</span>QWidget(MainWindow)
</span></span><span style="display:flex;"><span>        self<span style="color:#f92672">.</span>centralwidget<span style="color:#f92672">.</span>setObjectName(<span style="color:#e6db74">&#34;centralwidget&#34;</span>)
</span></span><span style="display:flex;"><span>        self<span style="color:#f92672">.</span>Button_run <span style="color:#f92672">=</span> QtWidgets<span style="color:#f92672">.</span>QPushButton(self<span style="color:#f92672">.</span>centralwidget)
</span></span><span style="display:flex;"><span>        self<span style="color:#f92672">.</span>Button_run<span style="color:#f92672">.</span>setGeometry(QtCore<span style="color:#f92672">.</span>QRect(<span style="color:#ae81ff">50</span>, <span style="color:#ae81ff">240</span>, <span style="color:#ae81ff">121</span>, <span style="color:#ae81ff">41</span>))
</span></span><span style="display:flex;"><span>        self<span style="color:#f92672">.</span>Button_run<span style="color:#f92672">.</span>setObjectName(<span style="color:#e6db74">&#34;Button_run&#34;</span>)
</span></span><span style="display:flex;"><span>        self<span style="color:#f92672">.</span>Button_close <span style="color:#f92672">=</span> QtWidgets<span style="color:#f92672">.</span>QPushButton(self<span style="color:#f92672">.</span>centralwidget)
</span></span><span style="display:flex;"><span>        self<span style="color:#f92672">.</span>Button_close<span style="color:#f92672">.</span>setGeometry(QtCore<span style="color:#f92672">.</span>QRect(<span style="color:#ae81ff">220</span>, <span style="color:#ae81ff">240</span>, <span style="color:#ae81ff">121</span>, <span style="color:#ae81ff">41</span>))
</span></span><span style="display:flex;"><span>        self<span style="color:#f92672">.</span>Button_close<span style="color:#f92672">.</span>setObjectName(<span style="color:#e6db74">&#34;Button_close&#34;</span>)
</span></span><span style="display:flex;"><span>        self<span style="color:#f92672">.</span>label_link <span style="color:#f92672">=</span> QtWidgets<span style="color:#f92672">.</span>QLabel(self<span style="color:#f92672">.</span>centralwidget)
</span></span><span style="display:flex;"><span>        self<span style="color:#f92672">.</span>label_link<span style="color:#f92672">.</span>setGeometry(QtCore<span style="color:#f92672">.</span>QRect(<span style="color:#ae81ff">60</span>, <span style="color:#ae81ff">110</span>, <span style="color:#ae81ff">71</span>, <span style="color:#ae81ff">21</span>))
</span></span><span style="display:flex;"><span>        self<span style="color:#f92672">.</span>label_link<span style="color:#f92672">.</span>setObjectName(<span style="color:#e6db74">&#34;label_link&#34;</span>)
</span></span><span style="display:flex;"><span>        self<span style="color:#f92672">.</span>line_link <span style="color:#f92672">=</span> QtWidgets<span style="color:#f92672">.</span>QLineEdit(self<span style="color:#f92672">.</span>centralwidget)
</span></span><span style="display:flex;"><span>        self<span style="color:#f92672">.</span>line_link<span style="color:#f92672">.</span>setGeometry(QtCore<span style="color:#f92672">.</span>QRect(<span style="color:#ae81ff">130</span>, <span style="color:#ae81ff">110</span>, <span style="color:#ae81ff">211</span>, <span style="color:#ae81ff">21</span>))
</span></span><span style="display:flex;"><span>        self<span style="color:#f92672">.</span>line_link<span style="color:#f92672">.</span>setObjectName(<span style="color:#e6db74">&#34;line_link&#34;</span>)
</span></span><span style="display:flex;"><span>        self<span style="color:#f92672">.</span>text_result <span style="color:#f92672">=</span> QtWidgets<span style="color:#f92672">.</span>QTextEdit(self<span style="color:#f92672">.</span>centralwidget)
</span></span><span style="display:flex;"><span>        self<span style="color:#f92672">.</span>text_result<span style="color:#f92672">.</span>setGeometry(QtCore<span style="color:#f92672">.</span>QRect(<span style="color:#ae81ff">370</span>, <span style="color:#ae81ff">110</span>, <span style="color:#ae81ff">291</span>, <span style="color:#ae81ff">321</span>))
</span></span><span style="display:flex;"><span>        self<span style="color:#f92672">.</span>text_result<span style="color:#f92672">.</span>setObjectName(<span style="color:#e6db74">&#34;text_result&#34;</span>)
</span></span><span style="display:flex;"><span>        MainWindow<span style="color:#f92672">.</span>setCentralWidget(self<span style="color:#f92672">.</span>centralwidget)
</span></span><span style="display:flex;"><span>        self<span style="color:#f92672">.</span>menubar <span style="color:#f92672">=</span> QtWidgets<span style="color:#f92672">.</span>QMenuBar(MainWindow)
</span></span><span style="display:flex;"><span>        self<span style="color:#f92672">.</span>menubar<span style="color:#f92672">.</span>setGeometry(QtCore<span style="color:#f92672">.</span>QRect(<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">679</span>, <span style="color:#ae81ff">26</span>))
</span></span><span style="display:flex;"><span>        self<span style="color:#f92672">.</span>menubar<span style="color:#f92672">.</span>setObjectName(<span style="color:#e6db74">&#34;menubar&#34;</span>)
</span></span><span style="display:flex;"><span>        MainWindow<span style="color:#f92672">.</span>setMenuBar(self<span style="color:#f92672">.</span>menubar)
</span></span><span style="display:flex;"><span>        self<span style="color:#f92672">.</span>statusbar <span style="color:#f92672">=</span> QtWidgets<span style="color:#f92672">.</span>QStatusBar(MainWindow)
</span></span><span style="display:flex;"><span>        self<span style="color:#f92672">.</span>statusbar<span style="color:#f92672">.</span>setObjectName(<span style="color:#e6db74">&#34;statusbar&#34;</span>)
</span></span><span style="display:flex;"><span>        MainWindow<span style="color:#f92672">.</span>setStatusBar(self<span style="color:#f92672">.</span>statusbar)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        self<span style="color:#f92672">.</span>retranslateUi(MainWindow)
</span></span><span style="display:flex;"><span>        QtCore<span style="color:#f92672">.</span>QMetaObject<span style="color:#f92672">.</span>connectSlotsByName(MainWindow)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">retranslateUi</span>(self, MainWindow):
</span></span><span style="display:flex;"><span>        _translate <span style="color:#f92672">=</span> QtCore<span style="color:#f92672">.</span>QCoreApplication<span style="color:#f92672">.</span>translate
</span></span><span style="display:flex;"><span>        MainWindow<span style="color:#f92672">.</span>setWindowTitle(_translate(<span style="color:#e6db74">&#34;MainWindow&#34;</span>, <span style="color:#e6db74">&#34;爬虫&#34;</span>))
</span></span><span style="display:flex;"><span>        self<span style="color:#f92672">.</span>Button_run<span style="color:#f92672">.</span>setText(_translate(<span style="color:#e6db74">&#34;MainWindow&#34;</span>, <span style="color:#e6db74">&#34;开始爬取&#34;</span>))
</span></span><span style="display:flex;"><span>        self<span style="color:#f92672">.</span>Button_close<span style="color:#f92672">.</span>setText(_translate(<span style="color:#e6db74">&#34;MainWindow&#34;</span>, <span style="color:#e6db74">&#34;关闭&#34;</span>))
</span></span><span style="display:flex;"><span>        self<span style="color:#f92672">.</span>label_link<span style="color:#f92672">.</span>setText(_translate(<span style="color:#e6db74">&#34;MainWindow&#34;</span>, <span style="color:#e6db74">&#34;目录链接&#34;</span>))
</span></span></code></pre></div><h2 id="main文件中的代码">main文件中的代码</h2>
<p>创建一个文件命名为main.py（用来存放我们的主程序）</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">import</span> sys
</span></span><span style="display:flex;"><span><span style="color:#75715e"># PyQt5中使用的基本控件都在PyQt5.QtWidgets模块中</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> PyQt5.QtWidgets <span style="color:#f92672">import</span> QApplication, QMainWindow
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 导入designer工具生成的login模块</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> win <span style="color:#f92672">import</span> Ui_MainWindow
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> time
</span></span></code></pre></div><p>而win是我刚刚窗口文件编译出来文件Ui_mainWindow是我的类名</p>
<p>（不要一股脑的抄，依葫芦画瓢就行）</p>
<p><img src="https://0ha.top/img/fdedcf61a94b4a9197a4fbf3b90c73af.png" alt=""></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">MyMainForm</span>(QMainWindow, Ui_MainWindow):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> __init__(self, parent<span style="color:#f92672">=</span><span style="color:#66d9ef">None</span>):
</span></span><span style="display:flex;"><span>        super(MyMainForm, self)<span style="color:#f92672">.</span>__init__(parent)
</span></span><span style="display:flex;"><span>        self<span style="color:#f92672">.</span>setupUi(self)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">if</span> __name__ <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;__main__&#34;</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># 固定的，PyQt5程序都需要QApplication对象。sys.argv是命令行参数列表，确保程序可以双击运行</span>
</span></span><span style="display:flex;"><span>    app <span style="color:#f92672">=</span> QApplication(sys<span style="color:#f92672">.</span>argv)
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># 初始化</span>
</span></span><span style="display:flex;"><span>    myWin <span style="color:#f92672">=</span> MyMainForm()
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># 将窗口控件显示在屏幕上</span>
</span></span><span style="display:flex;"><span>    myWin<span style="color:#f92672">.</span>show()
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># 程序运行，sys.exit方法确保程序完整退出。</span>
</span></span><span style="display:flex;"><span>    sys<span style="color:#f92672">.</span>exit(app<span style="color:#f92672">.</span>exec_())
</span></span></code></pre></div><p>合在一起，然后运行，就可以看到出现了一个窗口</p>
<p>但是我们的按钮没有任何作用</p>
<p>接下来我们就要用函数绑定按下按钮的事件</p>
<p>刚刚的函数中的</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> __init__(self, parent<span style="color:#f92672">=</span><span style="color:#66d9ef">None</span>):
</span></span><span style="display:flex;"><span>        super(MyMainForm, self)<span style="color:#f92672">.</span>__init__(parent)
</span></span><span style="display:flex;"><span>        self<span style="color:#f92672">.</span>setupUi(self)
</span></span></code></pre></div><p>可以变为这个 （意思就是按下Button_close的按钮触发close函数，这个函数不用自己定义，按下Button_run按钮执行F_run函数，这个要我们自己定义了）</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> __init__(self, parent<span style="color:#f92672">=</span><span style="color:#66d9ef">None</span>):
</span></span><span style="display:flex;"><span>        super(MyMainForm, self)<span style="color:#f92672">.</span>__init__(parent)
</span></span><span style="display:flex;"><span>        self<span style="color:#f92672">.</span>setupUi(self)
</span></span><span style="display:flex;"><span>        self<span style="color:#f92672">.</span>Button_close<span style="color:#f92672">.</span>clicked<span style="color:#f92672">.</span>connect(self<span style="color:#f92672">.</span>close)
</span></span><span style="display:flex;"><span>        self<span style="color:#f92672">.</span>Button_run<span style="color:#f92672">.</span>clicked<span style="color:#f92672">.</span>connect(self<span style="color:#f92672">.</span>F_run)
</span></span></code></pre></div>
    </div>
    <div class="post-footer">
      
    </div>
  </article>

    </main>
  </body>
</html>
